<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="large" color="#2f86e7" type="ball-scale-multiple"></ngx-spinner>

<particles [params]="myParams" [style]="myStyle" [width]="width" [height]="height"></particles>

<div [ngClass]="(language === 'EN' ? 'ltr':'rtl')" class="d-flex justify-content-center mt-5 container">
    <div class="my-5 w-75 update">
        <h1 *ngIf="language==='EN'" class="my-3 text-primary">
            Change password
        </h1>
        <h1 *ngIf="language==='AR'" class="my-3 text-primary">
            تغير كلمة المرور
        </h1>

        <form [formGroup]="changePasswordForm" (ngSubmit)="submitChangePasswordForm(changePasswordForm)">
            <div *ngIf="language==='EN'" class="form-floating mb-3">
                <input [ngClass]="{'is-valid': changePasswordForm.get('newPassword')?.errors==null}" formControlName="newPassword" type="password" class="form-control text-primary border-primary bg-transparent" id="newPassword" placeholder="New password">
                <label class="text-primary" for="newPassword">New password</label>
                <div *ngIf="changePasswordForm.get('newPassword')?.errors!=null && changePasswordForm.get('newPassword')?.touched" class="alert alert-danger mt-2 fw-bolder bg-transparent border-danger">
                    <p *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']">New password is required</p>
                    <p *ngIf="changePasswordForm.get('newPassword')?.errors?.['pattern']">New password should contain at least 8 characters (1 number, 1 lowercase character, 1 uppercase character or 1 special character(@,$,&,_))</p>
                </div>
            </div>
            <div *ngIf="language==='AR'" class="form-floating mb-3">
                <input [ngClass]="{'validr': changePasswordForm.get('newPassword')?.errors==null}" formControlName="newPassword" type="password" class="form-control text-primary border-primary bg-transparent" id="newPassword" placeholder="New password">
                <label class="text-primary right" for="newPassword">كلمة المرور الجديدة</label>
                <div *ngIf="changePasswordForm.get('newPassword')?.errors!=null && changePasswordForm.get('newPassword')?.touched" class="alert alert-danger mt-2 fw-bolder bg-transparent border-danger">
                    <p *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']">مطلوب إدخال كلمة مرور جديدة</p>
                    <p *ngIf="changePasswordForm.get('newPassword')?.errors?.['pattern']">يجب أن تحتوي كلمة المرور الجديدة على 8 أحرف على الأقل (رقم واحد ، حرف واحد صغير ، حرف واحد كبير او حرف خاص واحد (@ ، $ ، & ، _))</p>
                </div>
            </div>
            <div *ngIf="language==='EN'" class="form-floating mb-3">
                <input [ngClass]="{'is-valid': changePasswordForm.get('cNewPassword')?.errors==null&&changePasswordForm.get('cNewPassword')?.value===changePasswordForm.get('newPassword')?.value}" formControlName="cNewPassword" type="password" class="form-control text-primary border-primary bg-transparent"
                    id="cNewPassword" placeholder="Confirm new password">
                <label class="text-primary" for="cNewPassword">Confirm new password</label>
                <div *ngIf="changePasswordForm.get('cNewPassword')?.errors!=null && changePasswordForm.get('cNewPassword')?.touched" class="alert alert-danger mt-2 fw-bolder bg-transparent border-danger">
                    <p *ngIf="changePasswordForm.get('cNewPassword')?.errors?.['required']">Confirm new password is required</p>
                </div>
                <p class="alert alert-danger mt-2 fw-bolder bg-transparent border-danger" *ngIf="changePasswordForm.get('cNewPassword')?.value!=changePasswordForm.get('newPassword')?.value && changePasswordForm.get('cNewPassword')?.touched">Confirm new password must match new password</p>
            </div>
            <div *ngIf="language==='AR'" class="form-floating mb-3">
                <input [ngClass]="{'is-valid': changePasswordForm.get('cNewPassword')?.errors==null&&changePasswordForm.get('cNewPassword')?.value===changePasswordForm.get('newPassword')?.value}" formControlName="cNewPassword" type="password" class="form-control text-primary border-primary bg-transparent"
                    id="cNewPassword" placeholder="Confirm new password">
                <label class="text-primary right" for="cNewPassword">تأكيد كلمة المرور الجديدة</label>
                <div *ngIf="changePasswordForm.get('cNewPassword')?.errors!=null && changePasswordForm.get('cNewPassword')?.touched" class="alert alert-danger mt-2 fw-bolder bg-transparent border-danger">
                    <p *ngIf="changePasswordForm.get('cNewPassword')?.errors?.['required']">مطلوب تأكيد كلمة المرور الجديدة</p>
                </div>
                <p class="alert alert-danger mt-2 fw-bolder bg-transparent border-danger" *ngIf="changePasswordForm.get('cNewPassword')?.value!=changePasswordForm.get('newPassword')?.value && changePasswordForm.get('cNewPassword')?.touched">تأكيد كلمة المرور الجديدة يجب أن تتطابق مع كلمة المرور الجديدة</p>
            </div>
            <button *ngIf="language==='EN'" [disabled]="changePasswordForm.invalid||changePasswordForm.get('cNewPassword')?.value!=changePasswordForm.get('newPassword')?.value" type="submit" class="btn btn-outline-primary">Update</button>
            <button *ngIf="language==='AR'" [disabled]="changePasswordForm.invalid||changePasswordForm.get('cNewPassword')?.value!=changePasswordForm.get('newPassword')?.value" type="submit" class="btn btn-outline-primary">تحديث</button>
        </form>
    </div>
</div>